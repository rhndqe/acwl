--[[
    reiAnC System Module
    Upload to: https://raw.githubusercontent.com/rhndqe/acwl/refs/heads/main/sys
]]

local SystemModule = {}

-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local HttpService = game:GetService("HttpService")
local TweenService = game:GetService("TweenService")
local MarketplaceService = game:GetService("MarketplaceService")

-- Sound IDs
local SOUND_CLICK = "rbxassetid://6895079853"
local SOUND_HOVER = "rbxassetid://6895079853"
local SOUND_TOGGLE = "rbxassetid://6895079853"

-- ============================================
-- ADVANCED ANTI-CHEAT ENGINE
-- ============================================
local AntiCheat = {}
AntiCheat.__index = AntiCheat

function AntiCheat.new(config, userData)
	local self = setmetatable({}, AntiCheat)
	self.Config = config
	self.UserData = userData
	self.PlayerData = {}
	self.Violations = {}
	self.BannedUsers = config.BannedUsers or {}
	self.Statistics = {
		TotalDetections = 0,
		PlayersKicked = 0,
		PlayersBanned = 0,
		DetectionsByType = {},
		StartTime = tick()
	}
	self.Settings = {
		Speed = config.Speed and config.Speed.Enabled or true,
		Fly = config.Fly and config.Fly.Enabled or true,
		Teleport = config.Teleport and config.Teleport.Enabled or true,
		Jump = config.Jump and config.Jump.Enabled or true,
		NoClip = config.NoClip and config.NoClip.Enabled or true,
		InfiniteJump = config.InfiniteJump and config.InfiniteJump.Enabled or true,
		GodMode = config.GodMode and config.GodMode.Enabled or true,
		RemoteSpy = config.RemoteSpy and config.RemoteSpy.Enabled or true,
		ExecutorDetection = config.ExecutorDetection and config.ExecutorDetection.Enabled or true,
		AntiExploit = config.AntiExploit and config.AntiExploit.Enabled or true
	}
	return self
end

function AntiCheat:InitPlayer(player)
	self.PlayerData[player.UserId] = {
		JoinTime = tick(),
		LastPosition = nil,
		AirTime = 0,
		ConsecutiveJumps = 0,
		LastJumpTime = 0,
		ViolationCount = 0,
		RemoteCalls = {},
		LastRemoteTime = {},
		SuspiciousActivity = 0,
		IsBeingChecked = false
	}
	self.Violations[player.UserId] = {}
end

function AntiCheat:RemovePlayer(player)
	self.PlayerData[player.UserId] = nil
	self.Violations[player.UserId] = nil
end

-- EXECUTOR DETECTION
function AntiCheat:DetectExecutor(player)
	if not self.Settings.ExecutorDetection then return end

	-- Monitor suspicious remote calls
	local data = self.PlayerData[player.UserId]
	if not data then return end

	-- Check for rapid remote creation
	local currentTime = tick()
	if data.LastRemoteCheck then
		if currentTime - data.LastRemoteCheck < 0.1 then
			data.SuspiciousActivity = data.SuspiciousActivity + 1
			if data.SuspiciousActivity > 10 then
				self:LogViolation(player, "Executor", {
					activity = data.SuspiciousActivity,
					reason = "Rapid remote creation"
				})
			end
		end
	end
	data.LastRemoteCheck = currentTime
end

-- REMOTE SPY DETECTION
function AntiCheat:MonitorRemoteCalls(player, remote, ...)
	if not self.Settings.RemoteSpy then return false end

	local data = self.PlayerData[player.UserId]
	if not data then return false end

	local remoteName = remote.Name
	local currentTime = tick()

	-- Initialize tracking
	if not data.RemoteCalls[remoteName] then
		data.RemoteCalls[remoteName] = {
			count = 0,
			lastReset = currentTime
		}
	end

	local remoteData = data.RemoteCalls[remoteName]

	-- Reset counter every second
	if currentTime - remoteData.lastReset >= 1 then
		remoteData.count = 0
		remoteData.lastReset = currentTime
	end

	remoteData.count = remoteData.count + 1

	-- Check for spam (more than 50 calls per second)
	if remoteData.count > 50 then
		self:LogViolation(player, "RemoteSpam", {
			remote = remoteName,
			calls = remoteData.count
		})
		return true
	end

	-- Check for scanning patterns (rapid sequential calls to different remotes)
	data.LastRemoteTime[remoteName] = currentTime

	local recentRemotes = 0
	for name, time in pairs(data.LastRemoteTime) do
		if currentTime - time < 0.5 then
			recentRemotes = recentRemotes + 1
		end
	end

	if recentRemotes > 10 then
		data.SuspiciousActivity = data.SuspiciousActivity + 1
		if data.SuspiciousActivity > 3 then
			self:LogViolation(player, "RemoteScanning", {
				remotes = recentRemotes,
				activity = data.SuspiciousActivity
			})
			return true
		end
	end

	return false
end

-- SPEED DETECTION
function AntiCheat:CheckSpeed(player, character)
	if not self.Settings.Speed then return false end

	local humanoid = character:FindFirstChild("Humanoid")
	if not humanoid then return false end

	local speed = humanoid.WalkSpeed
	local maxSpeed = self.Config.Speed and self.Config.Speed.Max or 25
	local tolerance = self.Config.Speed and self.Config.Speed.Tolerance or 5

	if speed > maxSpeed + tolerance then
		self:LogViolation(player, "Speed", {
			detected = math.floor(speed), 
			max = maxSpeed,
			tolerance = tolerance
		})
		if self.Config.Speed and self.Config.Speed.AutoReset then
			humanoid.WalkSpeed = maxSpeed
		end
		return true
	end
	return false
end

-- FLY DETECTION
function AntiCheat:CheckFly(player, character)
	if not self.Settings.Fly then return false end

	local humanoid = character:FindFirstChild("Humanoid")
	local rootPart = character:FindFirstChild("HumanoidRootPart")
	if not humanoid or not rootPart then return false end

	local data = self.PlayerData[player.UserId]
	if not data then return false end

	if humanoid.FloorMaterial == Enum.Material.Air and humanoid:GetState() ~= Enum.HumanoidStateType.Swimming then
		data.AirTime = data.AirTime + 0.1
	else
		data.AirTime = 0
	end

	local maxAirTime = self.Config.Fly and self.Config.Fly.MaxAirTime or 3
	local tolerance = self.Config.Fly and self.Config.Fly.Tolerance or 1

	if data.AirTime > maxAirTime + tolerance then
		self:LogViolation(player, "Fly", {
			airTime = math.floor(data.AirTime * 10) / 10,
			max = maxAirTime
		})

		if self.Config.Fly and self.Config.Fly.AutoBring then
			-- Bring player down
			local params = RaycastParams.new()
			params.FilterDescendantsInstances = {character}
			params.FilterType = Enum.RaycastFilterType.Exclude
			local result = workspace:Raycast(rootPart.Position, Vector3.new(0, -1000, 0), params)
			if result then
				rootPart.CFrame = CFrame.new(result.Position + Vector3.new(0, 5, 0))
			end
		end

		data.AirTime = 0
		return true
	end
	return false
end

-- TELEPORT DETECTION
function AntiCheat:CheckTeleport(player, character)
	if not self.Settings.Teleport then return false end

	local rootPart = character:FindFirstChild("HumanoidRootPart")
	if not rootPart then return false end

	local data = self.PlayerData[player.UserId]
	if not data then return false end

	-- Ignore spawn teleports
	local ignoreSpawn = self.Config.Teleport and self.Config.Teleport.IgnoreSpawn
	if ignoreSpawn and tick() - data.JoinTime < 5 then
		data.LastPosition = rootPart.Position
		return false
	end

	if data.LastPosition then
		local distance = (rootPart.Position - data.LastPosition).Magnitude
		local maxDistance = self.Config.Teleport and self.Config.Teleport.MaxDistance or 50
		local tolerance = self.Config.Teleport and self.Config.Teleport.Tolerance or 20

		if distance > maxDistance + tolerance then
			self:LogViolation(player, "Teleport", {
				distance = math.floor(distance),
				max = maxDistance
			})

			if self.Config.Teleport and self.Config.Teleport.AutoReturn then
				rootPart.CFrame = CFrame.new(data.LastPosition)
			end
			return true
		end
	end

	data.LastPosition = rootPart.Position
	return false
end

-- NOCLIP DETECTION
function AntiCheat:CheckNoClip(player, character)
	if not self.Settings.NoClip then return false end

	local rootPart = character:FindFirstChild("HumanoidRootPart")
	if not rootPart then return false end

	if rootPart.CanCollide == false then
		local humanoid = character:FindFirstChild("Humanoid")
		if humanoid and humanoid:GetState() ~= Enum.HumanoidStateType.Dead then
			self:LogViolation(player, "NoClip", {
				position = rootPart.Position
			})

			if self.Config.NoClip and self.Config.NoClip.AutoFix then
				rootPart.CanCollide = true
			end
			return true
		end
	end
	return false
end

-- JUMP POWER DETECTION
function AntiCheat:CheckJumpPower(player, character)
	if not self.Settings.Jump then return false end

	local humanoid = character:FindFirstChild("Humanoid")
	if not humanoid then return false end

	local jumpPower = humanoid.JumpPower
	local maxJumpPower = self.Config.Jump and self.Config.Jump.MaxPower or 50
	local tolerance = self.Config.Jump and self.Config.Jump.Tolerance or 5

	if jumpPower > maxJumpPower + tolerance then
		self:LogViolation(player, "JumpPower", {
			detected = math.floor(jumpPower),
			max = maxJumpPower
		})

		if self.Config.Jump and self.Config.Jump.AutoReset then
			humanoid.JumpPower = maxJumpPower
		end
		return true
	end
	return false
end

-- INFINITE JUMP DETECTION
function AntiCheat:CheckInfiniteJump(player, character)
	if not self.Settings.InfiniteJump then return false end

	local data = self.PlayerData[player.UserId]
	if not data then return false end

	local humanoid = character:FindFirstChild("Humanoid")
	if not humanoid then return false end

	local currentTime = tick()
	local state = humanoid:GetState()

	if state == Enum.HumanoidStateType.Jumping then
		if data.LastJumpTime and currentTime - data.LastJumpTime < 0.1 then
			data.ConsecutiveJumps = data.ConsecutiveJumps + 1
		else
			data.ConsecutiveJumps = 1
		end

		local maxJumps = self.Config.InfiniteJump and self.Config.InfiniteJump.MaxConsecutiveJumps or 3
		if data.ConsecutiveJumps > maxJumps then
			self:LogViolation(player, "InfiniteJump", {
				jumps = data.ConsecutiveJumps,
				max = maxJumps
			})
			return true
		end

		data.LastJumpTime = currentTime
	elseif state == Enum.HumanoidStateType.Landed or state == Enum.HumanoidStateType.Running then
		data.ConsecutiveJumps = 0
	end

	return false
end

-- GOD MODE DETECTION
function AntiCheat:CheckGodMode(player, character)
	if not self.Settings.GodMode then return false end

	local humanoid = character:FindFirstChild("Humanoid")
	if not humanoid then return false end

	-- Check for impossible health values
	if self.Config.GodMode and self.Config.GodMode.CheckHealth then
		if humanoid.Health > humanoid.MaxHealth then
			self:LogViolation(player, "GodMode", {
				health = humanoid.Health,
				maxHealth = humanoid.MaxHealth,
				reason = "Health exceeds max"
			})
			humanoid.Health = humanoid.MaxHealth
			return true
		end

		-- Check for invincibility (health not decreasing when should)
		local data = self.PlayerData[player.UserId]
		if data then
			if data.LastHealth and humanoid.Health == data.LastHealth then
				data.GodModeCheckTime = data.GodModeCheckTime or 0
				data.GodModeCheckTime = data.GodModeCheckTime + 0.1

				if data.GodModeCheckTime > 3 then -- 3 seconds of no health decrease
					self:LogViolation(player, "GodMode", {
						reason = "No health decrease for 3+ seconds"
					})
					data.GodModeCheckTime = 0
					return true
				end
			else
				data.GodModeCheckTime = 0
			end
			data.LastHealth = humanoid.Health
		end
	end

	return false
end

-- LOG VIOLATION
function AntiCheat:LogViolation(player, violationType, data)
	local userId = player.UserId

	if not self.Violations[userId] then
		self.Violations[userId] = {}
	end

	local violationData = {
		type = violationType,
		data = data,
		time = tick(),
		playerName = player.Name,
		playerId = userId
	}

	table.insert(self.Violations[userId], violationData)

	local count = #self.Violations[userId]

	self.Statistics.TotalDetections = self.Statistics.TotalDetections + 1
	self.Statistics.DetectionsByType[violationType] = (self.Statistics.DetectionsByType[violationType] or 0) + 1

	if self.PlayerData[userId] then
		self.PlayerData[userId].ViolationCount = count
	end

	-- Format data for logging
	local dataStr = ""
	for k, v in pairs(data) do
		dataStr = dataStr .. k .. "=" .. tostring(v) .. " "
	end

	-- Log to console with color coding
	local logMessage = string.format("[reiAnC] %s (%d) - %s | %s| Count: %d", 
		player.Name, userId, violationType, dataStr, count)

	-- Different colors for different violation types
	if violationType == "Speed" or violationType == "Fly" or violationType == "Teleport" then
		warn("âš ï¸ " .. logMessage)
	elseif violationType == "Executor" or violationType == "RemoteSpam" then
		warn("ðŸš¨ " .. logMessage)
	else
		print("ðŸ” " .. logMessage)
	end

	-- Save to DataStore for persistent logging (optional)
	pcall(function()
		local success, result = pcall(function()
			-- Implement DataStore saving here if needed
		end)
	end)

	-- Apply punishment based on violation count
	local maxViolations = self.Config.Punishment and self.Config.Punishment.MaxViolations or 3
	local autoKick = self.Config.Punishment and self.Config.Punishment.AutoKick

	if autoKick and count >= maxViolations then
		local reason = self.Config.Punishment and self.Config.Punishment.KickMessage or "[reiAnC] Anti-Cheat Detection"
		reason = reason:gsub("%%REASON%%", violationType)
		self:KickPlayer(player, reason)
	end

	-- Ban for severe violations
	if violationType == "Executor" or violationType == "RemoteSpam" then
		if count >= 2 then -- Ban faster for severe violations
			self:BanPlayer(player, violationType)
		end
	end

	return violationData
end

function AntiCheat:KickPlayer(player, reason)
	self.Statistics.PlayersKicked = self.Statistics.PlayersKicked + 1
	
	local kickMessage = reason or "[reiAnC] You have been kicked for violating game rules"
	player:Kick(kickMessage)
	
	print(string.format("[reiAnC] âœ… Kicked %s (%d) - Reason: %s", 
		player.Name, player.UserId, reason))
end

function AntiCheat:BanPlayer(player, reason)
	-- Check if already banned
	for _, ban in ipairs(self.BannedUsers) do
		if ban.userId == player.UserId then
			return false -- Already banned
		end
	end

	-- Add to ban list
	local banData = {
		userId = player.UserId,
		username = player.Name,
		time = os.time(),
		date = os.date("%Y-%m-%d %H:%M:%S"),
		reason = reason or "Anti-Cheat Violation",
		bannedBy = "System"
	}

	table.insert(self.BannedUsers, banData)
	self.Statistics.PlayersBanned = self.Statistics.PlayersBanned + 1

	-- Save to DataStore (optional)
	pcall(function()
		local success, result = pcall(function()
			-- Implement DataStore saving here
		end)
	end)

	-- Kick player with ban message
	local banMessage = self.Config.Punishment and self.Config.Punishment.BanMessage or "[reiAnC] You have been banned from this game"
	player:Kick(banMessage)

	print(string.format("[reiAnC] ðŸ”¨ Banned %s (%d) - Reason: %s", 
		player.Name, player.UserId, reason))

	-- Notify admins
	for _, admin in ipairs(Players:GetPlayers()) do
		if self:IsAdmin(admin) then
			-- You can send a notification here
		end
	end

	return true
end

function AntiCheat:IsAdmin(player)
	-- Check if player is admin based on your permission system
	-- This should be integrated with your PermissionSystem
	return player.UserId == game.CreatorId
end

function AntiCheat:UnbanPlayer(userId)
	for i, ban in ipairs(self.BannedUsers) do
		if ban.userId == userId then
			table.remove(self.BannedUsers, i)
			
			print(string.format("[reiAnC] âœ… Unbanned user %d", userId))
			
			-- Remove from DataStore (optional)
			pcall(function()
				local success, result = pcall(function()
					-- Implement DataStore removal here
				end)
			end)
			
			return true
		end
	end
	return false
end

function AntiCheat:GetBanList()
	return self.BannedUsers
end

function AntiCheat:IsPlayerBanned(userId)
	for _, ban in ipairs(self.BannedUsers) do
		if ban.userId == userId then
			return true, ban
		end
	end
	return false, nil
end

function AntiCheat:StartMonitoring()
	local interval = self.Config.CheckInterval or 0.1
	local lastCheck = tick()

	RunService.Heartbeat:Connect(function()
		local now = tick()
		if now - lastCheck < interval then return end
		lastCheck = now

		for _, player in ipairs(Players:GetPlayers()) do
			-- Check if player is banned
			local isBanned, banData = self:IsPlayerBanned(player.UserId)
			if isBanned then
				player:Kick(string.format("[reiAnC] You are banned. Reason: %s | Date: %s", 
					banData.reason, banData.date))
				continue
			end

			local character = player.Character
			if character and character:FindFirstChild("HumanoidRootPart") and character:FindFirstChild("Humanoid") then
				pcall(function()
					self:CheckSpeed(player, character)
					self:CheckFly(player, character)
					self:CheckTeleport(player, character)
					self:CheckNoClip(player, character)
					self:CheckJumpPower(player, character)
					self:CheckInfiniteJump(player, character)
					self:CheckGodMode(player, character)
					self:DetectExecutor(player)
				end)
			end
		end
	end)

	print("[reiAnC] âœ… Monitoring started with interval: " .. interval .. "s")
end

-- ============================================
-- PERMISSION SYSTEM
-- ============================================
local PermissionSystem = {}
PermissionSystem.__index = PermissionSystem

function PermissionSystem.new(config)
	local self = setmetatable({}, PermissionSystem)
	self.Permissions = {
		Owner = {},
		Developer = {},
		Admin = {},
		Moderator = {}
	}
	
	-- Load from config
	if config.Permissions then
		for role, userIds in pairs(config.Permissions) do
			if type(userIds) == "table" then
				for _, userId in ipairs(userIds) do
					-- Get username from UserId (this would need to be fetched properly)
					local username = "User_" .. tostring(userId)
					table.insert(self.Permissions[role], {
						userId = userId,
						username = username,
						addedDate = os.date("%Y-%m-%d")
					})
				end
			end
		end
	end

	-- Add game creator as owner
	if game.CreatorType == Enum.CreatorType.User then
		table.insert(self.Permissions.Owner, {
			userId = game.CreatorId,
			username = "Game Owner",
			addedDate = os.date("%Y-%m-%d")
		})
	end

	return self
end

function PermissionSystem:AddUser(role, userId, username)
	if not self.Permissions[role] then return false end

	-- Check if already exists
	for _, user in ipairs(self.Permissions[role]) do
		if user.userId == userId then
			return false
		end
	end

	table.insert(self.Permissions[role], {
		userId = userId,
		username = username or "User_" .. tostring(userId),
		addedDate = os.date("%Y-%m-%d")
	})

	return true
end

function PermissionSystem:RemoveUser(role, userId)
	if not self.Permissions[role] then return false end

	for i, user in ipairs(self.Permissions[role]) do
		if user.userId == userId then
			table.remove(self.Permissions[role], i)
			return true
		end
	end

	return false
end

function PermissionSystem:GetUserRole(userId)
	for role, users in pairs(self.Permissions) do
		for _, user in ipairs(users) do
			if user.userId == userId then
				return role
			end
		end
	end
	return nil
end

function PermissionSystem:CanAccess(userId)
	return self:GetUserRole(userId) ~= nil
end

function PermissionSystem:IsOwner(userId)
	local role = self:GetUserRole(userId)
	return role == "Owner"
end

function PermissionSystem:IsDeveloper(userId)
	local role = self:GetUserRole(userId)
	return role == "Developer" or role == "Owner"
end

function PermissionSystem:IsAdmin(userId)
	local role = self:GetUserRole(userId)
	return role == "Admin" or role == "Developer" or role == "Owner"
end

function PermissionSystem:IsModerator(userId)
	local role = self:GetUserRole(userId)
	return role == "Moderator" or role == "Admin" or role == "Developer" or role == "Owner"
end

-- ============================================
-- MODERN GUI SYSTEM - DENGAN URUTAN YANG BENAR
-- ============================================
local function CreateGUI(player, antiCheat, permissions, userData)
	local playerGui = player:WaitForChild("PlayerGui")

	if playerGui:FindFirstChild("reiAnC_GUI") then
		playerGui:FindFirstChild("reiAnC_GUI"):Destroy()
	end

	local ScreenGui = Instance.new("ScreenGui")
	ScreenGui.Name = "reiAnC_GUI"
	ScreenGui.ResetOnSpawn = false
	ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	ScreenGui.DisplayOrder = 100

	-- Main Container
	local MainContainer = Instance.new("Frame")
	MainContainer.Name = "MainContainer"
	MainContainer.Parent = ScreenGui
	MainContainer.AnchorPoint = Vector2.new(0.5, 0.5)
	MainContainer.Position = UDim2.new(0.5, 0, 0.5, 0)
	MainContainer.Size = UDim2.new(0, 850, 0, 600)
	MainContainer.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
	MainContainer.BackgroundTransparency = 0.4
	MainContainer.BorderSizePixel = 0

	local MainCorner = Instance.new("UICorner")
	MainCorner.CornerRadius = UDim.new(0, 12)
	MainCorner.Parent = MainContainer

	local Shadow = Instance.new("ImageLabel")
	Shadow.Name = "Shadow"
	Shadow.Parent = MainContainer
	Shadow.BackgroundTransparency = 1
	Shadow.Position = UDim2.new(0, -25, 0, -25)
	Shadow.Size = UDim2.new(1, 50, 1, 50)
	Shadow.ZIndex = 0
	Shadow.Image = "rbxassetid://5554236805"
	Shadow.ImageColor3 = Color3.fromRGB(0, 0, 0)
	Shadow.ImageTransparency = 0.7
	Shadow.ScaleType = Enum.ScaleType.Slice
	Shadow.SliceCenter = Rect.new(23, 23, 277, 277)

	-- Header
	local Header = Instance.new("Frame")
	Header.Name = "Header"
	Header.Parent = MainContainer
	Header.Size = UDim2.new(1, 0, 0, 70)
	Header.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
	Header.BackgroundTransparency = 0.2
	Header.BorderSizePixel = 0

	local HeaderCorner = Instance.new("UICorner")
	HeaderCorner.CornerRadius = UDim.new(0, 12)
	HeaderCorner.Parent = Header

	local HeaderGradient = Instance.new("UIGradient")
	HeaderGradient.Parent = Header
	HeaderGradient.Color = ColorSequence.new({
		ColorSequenceKeypoint.new(0, Color3.fromRGB(30, 30, 30)),
		ColorSequenceKeypoint.new(1, Color3.fromRGB(20, 20, 20))
	})

	local Title = Instance.new("TextLabel")
	Title.Parent = Header
	Title.Position = UDim2.new(0, 25, 0, 0)
	Title.Size = UDim2.new(0, 200, 1, 0)
	Title.BackgroundTransparency = 1
	Title.Font = Enum.Font.GothamBold
	Title.Text = "reiAnC v2.0"
	Title.TextColor3 = Color3.fromRGB(100, 150, 255)
	Title.TextSize = 26
	Title.TextXAlignment = Enum.TextXAlignment.Left

	local Subtitle = Instance.new("TextLabel")
	Subtitle.Parent = Header
	Subtitle.Position = UDim2.new(0, 25, 0, 40)
	Subtitle.Size = UDim2.new(0, 300, 0, 20)
	Subtitle.BackgroundTransparency = 1
	Subtitle.Font = Enum.Font.Gotham
	Subtitle.Text = "Advanced Anti-Cheat System"
	Subtitle.TextColor3 = Color3.fromRGB(150, 150, 150)
	Subtitle.TextSize = 12
	Subtitle.TextXAlignment = Enum.TextXAlignment.Left

	-- Profile Button
	local ProfileBtn = Instance.new("ImageButton")
	ProfileBtn.Name = "ProfileButton"
	ProfileBtn.Parent = Header
	ProfileBtn.AnchorPoint = Vector2.new(1, 0.5)
	ProfileBtn.Position = UDim2.new(1, -25, 0.5, 0)
	ProfileBtn.Size = UDim2.new(0, 45, 0, 45)
	ProfileBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	ProfileBtn.BackgroundTransparency = 0.3
	ProfileBtn.BorderSizePixel = 0
	ProfileBtn.Image = "rbxassetid://3926305904"
	ProfileBtn.ImageColor3 = Color3.fromRGB(255, 255, 255)

	local ProfileCorner = Instance.new("UICorner")
	ProfileCorner.CornerRadius = UDim.new(1, 0)
	ProfileCorner.Parent = ProfileBtn

	local ProfileStroke = Instance.new("UIStroke")
	ProfileStroke.Parent = ProfileBtn
	ProfileStroke.Color = Color3.fromRGB(100, 150, 255)
	ProfileStroke.Thickness = 2

	-- Profile Frame
	local ProfileFrame = Instance.new("Frame")
	ProfileFrame.Name = "ProfileFrame"
	ProfileFrame.Parent = ScreenGui
	ProfileFrame.AnchorPoint = Vector2.new(1, 0)
	ProfileFrame.Position = UDim2.new(1, -25, 0, 100)
	ProfileFrame.Size = UDim2.new(0, 280, 0, 220)
	ProfileFrame.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
	ProfileFrame.BackgroundTransparency = 0.2
	ProfileFrame.BorderSizePixel = 0
	ProfileFrame.Visible = false

	local ProfileFrameCorner = Instance.new("UICorner")
	ProfileFrameCorner.CornerRadius = UDim.new(0, 12)
	ProfileFrameCorner.Parent = ProfileFrame

	local ProfileFrameStroke = Instance.new("UIStroke")
	ProfileFrameStroke.Parent = ProfileFrame
	ProfileFrameStroke.Color = Color3.fromRGB(50, 50, 50)
	ProfileFrameStroke.Thickness = 2

	local ProfileIcon = Instance.new("ImageLabel")
	ProfileIcon.Parent = ProfileFrame
	ProfileIcon.Position = UDim2.new(0.5, 0, 0, 25)
	ProfileIcon.Size = UDim2.new(0, 70, 0, 70)
	ProfileIcon.AnchorPoint = Vector2.new(0.5, 0)
	ProfileIcon.BackgroundTransparency = 1
	ProfileIcon.Image = "rbxassetid://3926305904"
	ProfileIcon.ImageColor3 = Color3.fromRGB(100, 150, 255)

	local ProfileIconCorner = Instance.new("UICorner")
	ProfileIconCorner.CornerRadius = UDim.new(1, 0)
	ProfileIconCorner.Parent = ProfileIcon

	local ProfileInfo = Instance.new("TextLabel")
	ProfileInfo.Parent = ProfileFrame
	ProfileInfo.Position = UDim2.new(0, 20, 0, 110)
	ProfileInfo.Size = UDim2.new(1, -40, 0, 100)
	ProfileInfo.BackgroundTransparency = 1
	ProfileInfo.Font = Enum.Font.Gotham
	ProfileInfo.TextColor3 = Color3.fromRGB(255, 255, 255)
	ProfileInfo.TextSize = 13
	ProfileInfo.TextWrapped = true
	ProfileInfo.TextYAlignment = Enum.TextYAlignment.Top

	local expiryText = "Lifetime"
	if userData.expiry then
		expiryText = os.date("%Y-%m-%d", userData.expiry)
	end

	ProfileInfo.Text = string.format(
		"ðŸ‘¤ User ID: %d\nðŸ“› Username: %s\nðŸ† Tier: %s\nðŸ“… Expiry: %s\nðŸ”‘ Status: ACTIVE",
		player.UserId,
		player.Name,
		userData.tier:upper(),
		expiryText
	)

	-- Close Profile Button
	local CloseProfileBtn = Instance.new("TextButton")
	CloseProfileBtn.Parent = ProfileFrame
	CloseProfileBtn.AnchorPoint = Vector2.new(1, 0)
	CloseProfileBtn.Position = UDim2.new(1, -10, 0, 10)
	CloseProfileBtn.Size = UDim2.new(0, 25, 0, 25)
	CloseProfileBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	CloseProfileBtn.BackgroundTransparency = 0.5
	CloseProfileBtn.BorderSizePixel = 0
	CloseProfileBtn.Text = "âœ•"
	CloseProfileBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
	CloseProfileBtn.TextSize = 14

	local CloseProfileCorner = Instance.new("UICorner")
	CloseProfileCorner.CornerRadius = UDim.new(0, 6)
	CloseProfileCorner.Parent = CloseProfileBtn

	-- Tab Container
	local TabContainer = Instance.new("Frame")
	TabContainer.Name = "TabContainer"
	TabContainer.Parent = MainContainer
	TabContainer.Position = UDim2.new(0, 0, 0, 70)
	TabContainer.Size = UDim2.new(1, 0, 0, 55)
	TabContainer.BackgroundTransparency = 1

	local TabLayout = Instance.new("UIListLayout")
	TabLayout.Parent = TabContainer
	TabLayout.FillDirection = Enum.FillDirection.Horizontal
	TabLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
	TabLayout.Padding = UDim.new(0, 15)
	TabLayout.SortOrder = Enum.SortOrder.LayoutOrder

	-- Main Content Frame
	local MainFrame = Instance.new("Frame")
	MainFrame.Name = "MainFrame"
	MainFrame.Parent = MainContainer
	MainFrame.Position = UDim2.new(0, 15, 0, 135)
	MainFrame.Size = UDim2.new(1, -30, 1, -195)
	MainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
	MainFrame.BackgroundTransparency = 0.2
	MainFrame.BorderSizePixel = 0

	local MainFrameCorner = Instance.new("UICorner")
	MainFrameCorner.CornerRadius = UDim.new(0, 12)
	MainFrameCorner.Parent = MainFrame

	local MainFrameStroke = Instance.new("UIStroke")
	MainFrameStroke.Parent = MainFrame
	MainFrameStroke.Color = Color3.fromRGB(50, 50, 50)
	MainFrameStroke.Thickness = 2

	-- ============================================
	-- VARIABEL UNTUK FRAME
	-- ============================================
	local BanListFrame, PlayersListFrame, LogsFrame

	-- ============================================
	-- FUNGSI REFRESH - DIDEKLARASIKAN SEBELUM DIGUNAKAN
	-- ============================================

	-- Fungsi untuk refresh Players List
	local function RefreshPlayersList()
		if not PlayersListFrame then 
			print("[GUI] PlayersListFrame belum dibuat")
			return 
		end
		
		-- Clear existing
		for _, child in ipairs(PlayersListFrame:GetChildren()) do
			if child:IsA("Frame") then
				child:Destroy()
			end
		end

		local players = Players:GetPlayers()
		
		if #players == 0 then
			local EmptyLabel = Instance.new("TextLabel")
			EmptyLabel.Parent = PlayersListFrame
			EmptyLabel.Size = UDim2.new(1, 0, 0, 100)
			EmptyLabel.BackgroundTransparency = 1
			EmptyLabel.Font = Enum.Font.GothamItalic
			EmptyLabel.Text = "No players online"
			EmptyLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
			EmptyLabel.TextSize = 14
		else
			for _, targetPlayer in ipairs(players) do
				local PlayerFrame = Instance.new("Frame")
				PlayerFrame.Parent = PlayersListFrame
				PlayerFrame.Size = UDim2.new(1, 0, 0, 60)
				PlayerFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
				PlayerFrame.BackgroundTransparency = 0.3
				PlayerFrame.BorderSizePixel = 0

				local PlayerCorner = Instance.new("UICorner")
				PlayerCorner.CornerRadius = UDim.new(0, 8)
				PlayerCorner.Parent = PlayerFrame

				local PlayerInfo = Instance.new("TextLabel")
				PlayerInfo.Parent = PlayerFrame
				PlayerInfo.Position = UDim2.new(0, 15, 0, 10)
				PlayerInfo.Size = UDim2.new(0.6, -15, 0, 40)
				PlayerInfo.BackgroundTransparency = 1
				PlayerInfo.Font = Enum.Font.GothamBold
				PlayerInfo.Text = targetPlayer.Name
				PlayerInfo.TextColor3 = Color3.fromRGB(255, 255, 255)
				PlayerInfo.TextSize = 14
				PlayerInfo.TextXAlignment = Enum.TextXAlignment.Left

				local PlayerId = Instance.new("TextLabel")
				PlayerId.Parent = PlayerFrame
				PlayerId.Position = UDim2.new(0, 15, 0, 30)
				PlayerId.Size = UDim2.new(0.6, -15, 0, 20)
				PlayerId.BackgroundTransparency = 1
				PlayerId.Font = Enum.Font.Gotham
				PlayerId.Text = "ID: " .. targetPlayer.UserId
				PlayerId.TextColor3 = Color3.fromRGB(150, 150, 150)
				PlayerId.TextSize = 11
				PlayerId.TextXAlignment = Enum.TextXAlignment.Left

				-- Check if player has violations
				local violationCount = 0
				if antiCheat.Violations[targetPlayer.UserId] then
					violationCount = #antiCheat.Violations[targetPlayer.UserId]
				end

				local ViolationBadge = Instance.new("Frame")
				ViolationBadge.Parent = PlayerFrame
				ViolationBadge.AnchorPoint = Vector2.new(1, 0.5)
				ViolationBadge.Position = UDim2.new(0.9, -10, 0.5, 0)
				ViolationBadge.Size = UDim2.new(0, 25, 0, 25)
				ViolationBadge.BackgroundColor3 = violationCount > 0 and Color3.fromRGB(255, 100, 100) or Color3.fromRGB(50, 150, 50)
				ViolationBadge.BorderSizePixel = 0

				local ViolationCorner = Instance.new("UICorner")
				ViolationCorner.CornerRadius = UDim.new(1, 0)
				ViolationCorner.Parent = ViolationBadge

				local ViolationText = Instance.new("TextLabel")
				ViolationText.Parent = ViolationBadge
				ViolationText.Size = UDim2.new(1, 0, 1, 0)
				ViolationText.BackgroundTransparency = 1
				ViolationText.Font = Enum.Font.GothamBold
				ViolationText.Text = tostring(violationCount)
				ViolationText.TextColor3 = Color3.fromRGB(255, 255, 255)
				ViolationText.TextSize = 12

				-- Action buttons
				local ActionsFrame = Instance.new("Frame")
				ActionsFrame.Parent = PlayerFrame
				ActionsFrame.AnchorPoint = Vector2.new(1, 0.5)
				ActionsFrame.Position = UDim2.new(1, -15, 0.5, 0)
				ActionsFrame.Size = UDim2.new(0.3, -10, 0, 40)
				ActionsFrame.BackgroundTransparency = 1

				local KickBtn = Instance.new("TextButton")
				KickBtn.Name = "KickBtn"
				KickBtn.Parent = ActionsFrame
				KickBtn.Position = UDim2.new(0, 0, 0, 0)
				KickBtn.Size = UDim2.new(0.45, -5, 1, 0)
				KickBtn.BackgroundColor3 = Color3.fromRGB(255, 150, 50)
				KickBtn.BorderSizePixel = 0
				KickBtn.Font = Enum.Font.GothamBold
				KickBtn.Text = "Kick"
				KickBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
				KickBtn.TextSize = 12

				local KickCorner = Instance.new("UICorner")
				KickCorner.CornerRadius = UDim.new(0, 6)
				KickCorner.Parent = KickBtn

				local BanBtn = Instance.new("TextButton")
				BanBtn.Name = "BanBtn"
				BanBtn.Parent = ActionsFrame
				BanBtn.Position = UDim2.new(0.55, 5, 0, 0)
				BanBtn.Size = UDim2.new(0.45, -5, 1, 0)
				BanBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
				BanBtn.BorderSizePixel = 0
				BanBtn.Font = Enum.Font.GothamBold
				BanBtn.Text = "Ban"
				BanBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
				BanBtn.TextSize = 12

				local BanCorner = Instance.new("UICorner")
				BanCorner.CornerRadius = UDim.new(0, 6)
				BanCorner.Parent = BanBtn

				-- Button functionality
				KickBtn.MouseButton1Click:Connect(function()
					antiCheat:KickPlayer(targetPlayer, "Manual kick by admin")
					task.wait(0.5)
					RefreshPlayersList()
				end)

				BanBtn.MouseButton1Click:Connect(function()
					antiCheat:BanPlayer(targetPlayer, "Manual ban by admin")
					task.wait(0.5)
					RefreshPlayersList()
				end)
			end
		end
		
		-- Update canvas size
		task.wait(0.1)
		if PlayersListFrame:FindFirstChild("UIListLayout") then
			PlayersListFrame.CanvasSize = UDim2.new(0, 0, 0, PlayersListFrame.UIListLayout.AbsoluteContentSize.Y + 20)
		end
	end

	-- Fungsi untuk refresh Ban List
	local function RefreshBanList()
		if not BanListFrame then 
			print("[GUI] BanListFrame belum dibuat")
			return 
		end
		
		-- Clear existing
		for _, child in ipairs(BanListFrame:GetChildren()) do
			if child:IsA("Frame") then
				child:Destroy()
			end
		end

		local bannedUsers = antiCheat:GetBanList()

		if #bannedUsers == 0 then
			local EmptyLabel = Instance.new("TextLabel")
			EmptyLabel.Parent = BanListFrame
			EmptyLabel.Size = UDim2.new(1, 0, 0, 100)
			EmptyLabel.BackgroundTransparency = 1
			EmptyLabel.Font = Enum.Font.GothamItalic
			EmptyLabel.Text = "No banned users"
			EmptyLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
			EmptyLabel.TextSize = 14
		else
			for _, ban in ipairs(bannedUsers) do
				local BanItem = Instance.new("Frame")
				BanItem.Parent = BanListFrame
				BanItem.Size = UDim2.new(1, 0, 0, 70)
				BanItem.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
				BanItem.BackgroundTransparency = 0.3
				BanItem.BorderSizePixel = 0

				local BanCorner = Instance.new("UICorner")
				BanCorner.CornerRadius = UDim.new(0, 8)
				BanCorner.Parent = BanItem

				local BanStroke = Instance.new("UIStroke")
				BanStroke.Parent = BanItem
				BanStroke.Color = Color3.fromRGB(200, 50, 50)
				BanStroke.Thickness = 2

				local BanInfo = Instance.new("TextLabel")
				BanInfo.Parent = BanItem
				BanInfo.Position = UDim2.new(0, 15, 0, 10)
				BanInfo.Size = UDim2.new(0.7, -15, 0, 50)
				BanInfo.BackgroundTransparency = 1
				BanInfo.Font = Enum.Font.GothamBold
				BanInfo.Text = ban.username .. " (" .. ban.userId .. ")"
				BanInfo.TextColor3 = Color3.fromRGB(255, 255, 255)
				BanInfo.TextSize = 14
				BanInfo.TextXAlignment = Enum.TextXAlignment.Left
				BanInfo.TextYAlignment = Enum.TextYAlignment.Top

				local BanDate = Instance.new("TextLabel")
				BanDate.Parent = BanItem
				BanDate.Position = UDim2.new(0, 15, 0, 30)
				BanDate.Size = UDim2.new(0.7, -15, 0, 30)
				BanDate.BackgroundTransparency = 1
				BanDate.Font = Enum.Font.Gotham
				BanDate.Text = "Banned: " .. ban.date .. "\nReason: " .. (ban.reason or "Anti-Cheat Violation")
				BanDate.TextColor3 = Color3.fromRGB(200, 200, 200)
				BanDate.TextSize = 11
				BanDate.TextXAlignment = Enum.TextXAlignment.Left
				BanDate.TextYAlignment = Enum.TextYAlignment.Top

				local UnbanBtn = Instance.new("TextButton")
				UnbanBtn.Name = "UnbanBtn"
				UnbanBtn.Parent = BanItem
				UnbanBtn.AnchorPoint = Vector2.new(1, 0.5)
				UnbanBtn.Position = UDim2.new(1, -15, 0.5, 0)
				UnbanBtn.Size = UDim2.new(0, 80, 0, 35)
				UnbanBtn.BackgroundColor3 = Color3.fromRGB(50, 150, 50)
				UnbanBtn.BorderSizePixel = 0
				UnbanBtn.Font = Enum.Font.GothamBold
				UnbanBtn.Text = "Unban"
				UnbanBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
				UnbanBtn.TextSize = 13

				local UnbanCorner = Instance.new("UICorner")
				UnbanCorner.CornerRadius = UDim.new(0, 6)
				UnbanCorner.Parent = UnbanBtn

				UnbanBtn.MouseButton1Click:Connect(function()
					antiCheat:UnbanPlayer(ban.userId)
					task.wait(0.5)
					RefreshBanList()
				end)
			end
		end
		
		-- Update canvas size
		task.wait(0.1)
		if BanListFrame:FindFirstChild("UIListLayout") then
			BanListFrame.CanvasSize = UDim2.new(0, 0, 0, BanListFrame.UIListLayout.AbsoluteContentSize.Y + 20)
		end
	end

	-- Fungsi untuk refresh Logs
	local function RefreshLogs()
		if not LogsFrame then 
			print("[GUI] LogsFrame belum dibuat")
			return 
		end
		
		-- Clear existing
		for _, child in ipairs(LogsFrame:GetChildren()) do
			if child:IsA("Frame") then
				child:Destroy()
			end
		end

		-- Get recent violations (last 50)
		local allViolations = {}
		for userId, violations in pairs(antiCheat.Violations) do
			for _, violation in ipairs(violations) do
				table.insert(allViolations, {
					userId = userId,
					violation = violation
				})
			end
		end

		-- Sort by time (newest first)
		table.sort(allViolations, function(a, b)
			return a.violation.time > b.violation.time
		end)

		-- Display only last 50
		for i = 1, math.min(50, #allViolations) do
			local data = allViolations[i]
			local violation = data.violation

			local LogItem = Instance.new("Frame")
			LogItem.Parent = LogsFrame
			LogItem.Size = UDim2.new(1, 0, 0, 60)
			LogItem.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
			LogItem.BackgroundTransparency = 0.3
			LogItem.BorderSizePixel = 0

			local LogCorner = Instance.new("UICorner")
			LogCorner.CornerRadius = UDim.new(0, 8)
			LogCorner.Parent = LogItem

			local LogTitle = Instance.new("TextLabel")
			LogTitle.Parent = LogItem
			LogTitle.Position = UDim2.new(0, 15, 0, 10)
			LogTitle.Size = UDim2.new(1, -30, 0, 20)
			LogTitle.BackgroundTransparency = 1
			LogTitle.Font = Enum.Font.GothamBold
			LogTitle.Text = violation.playerName .. " (" .. data.userId .. ")"
			LogTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
			LogTitle.TextSize = 13
			LogTitle.TextXAlignment = Enum.TextXAlignment.Left

			local LogType = Instance.new("TextLabel")
			LogType.Parent = LogItem
			LogType.Position = UDim2.new(0, 15, 0, 30)
			LogType.Size = UDim2.new(0.5, -15, 0, 20)
			LogType.BackgroundTransparency = 1
			LogType.Font = Enum.Font.Gotham
			LogType.Text = "Violation: " .. violation.type
			LogType.TextColor3 = Color3.fromRGB(200, 200, 200)
			LogType.TextSize = 11
			LogType.TextXAlignment = Enum.TextXAlignment.Left

			local LogTime = Instance.new("TextLabel")
			LogTime.Parent = LogItem
			LogTime.Position = UDim2.new(0.5, 15, 0, 30)
			LogTime.Size = UDim2.new(0.5, -30, 0, 20)
			LogTime.BackgroundTransparency = 1
			LogTime.Font = Enum.Font.Gotham
			LogTime.Text = os.date("%H:%M:%S", violation.time)
			LogTime.TextColor3 = Color3.fromRGB(150, 150, 150)
			LogTime.TextSize = 11
			LogTime.TextXAlignment = Enum.TextXAlignment.Right
		end
		
		-- Update canvas size
		task.wait(0.1)
		if LogsFrame:FindFirstChild("UIListLayout") then
			LogsFrame.CanvasSize = UDim2.new(0, 0, 0, LogsFrame.UIListLayout.AbsoluteContentSize.Y + 20)
		end
	end

	-- ============================================
	-- BUAT TAB DAN KONTEN
	-- ============================================
	
	-- Tab Buttons
	local tabs = {
		{Name = "Dashboard", Icon = "rbxassetid://3926305904", LayoutOrder = 1},
		{Name = "Anti-Cheat", Icon = "rbxassetid://3926307971", LayoutOrder = 2},
		{Name = "Players", Icon = "rbxassetid://3926305904", LayoutOrder = 3},
		{Name = "Ban List", Icon = "rbxassetid://3926307971", LayoutOrder = 4},
		{Name = "Logs", Icon = "rbxassetid://3926305904", LayoutOrder = 5}
	}

	local tabButtons = {}
	local contentFrames = {}

	-- Create Tabs
	for i, tabInfo in ipairs(tabs) do
		local TabButton = Instance.new("TextButton")
		TabButton.Name = tabInfo.Name .. "Tab"
		TabButton.Parent = TabContainer
		TabButton.Size = UDim2.new(0, 120, 0, 45)
		TabButton.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
		TabButton.BackgroundTransparency = 0.3
		TabButton.BorderSizePixel = 0
		TabButton.Font = Enum.Font.GothamBold
		TabButton.Text = tabInfo.Name
		TabButton.TextColor3 = Color3.fromRGB(200, 200, 200)
		TabButton.TextSize = 13
		TabButton.LayoutOrder = tabInfo.LayoutOrder

		local TabCorner = Instance.new("UICorner")
		TabCorner.CornerRadius = UDim.new(0, 8)
		TabCorner.Parent = TabButton

		local TabStroke = Instance.new("UIStroke")
		TabStroke.Color = Color3.fromRGB(60, 60, 60)
		TabStroke.Thickness = 2
		TabStroke.Transparency = 0.5
		TabStroke.Parent = TabButton

		local TabIcon = Instance.new("ImageLabel")
		TabIcon.Parent = TabButton
		TabIcon.Position = UDim2.new(0, 10, 0.5, -10)
		TabIcon.Size = UDim2.new(0, 20, 0, 20)
		TabIcon.AnchorPoint = Vector2.new(0, 0.5)
		TabIcon.BackgroundTransparency = 1
		TabIcon.Image = tabInfo.Icon
		TabIcon.ImageColor3 = Color3.fromRGB(200, 200, 200)

		tabButtons[tabInfo.Name] = {
			Button = TabButton,
			Stroke = TabStroke,
			Icon = TabIcon
		}

		-- Content Frame for each tab
		local ContentFrame = Instance.new("ScrollingFrame")
		ContentFrame.Name = tabInfo.Name .. "Content"
		ContentFrame.Parent = MainFrame
		ContentFrame.Size = UDim2.new(1, 0, 1, 0)
		ContentFrame.BackgroundTransparency = 1
		ContentFrame.BorderSizePixel = 0
		ContentFrame.ScrollBarThickness = 6
		ContentFrame.ScrollBarImageColor3 = Color3.fromRGB(80, 80, 80)
		ContentFrame.CanvasSize = UDim2.new(0, 0, 0, 0)
		ContentFrame.Visible = false

		local ContentLayout = Instance.new("UIListLayout")
		ContentLayout.Parent = ContentFrame
		ContentLayout.Padding = UDim.new(0, 12)
		ContentLayout.SortOrder = Enum.SortOrder.LayoutOrder

		local ContentPadding = Instance.new("UIPadding")
		ContentPadding.Parent = ContentFrame
		ContentPadding.PaddingLeft = UDim.new(0, 15)
		ContentPadding.PaddingRight = UDim.new(0, 15)
		ContentPadding.PaddingTop = UDim.new(0, 15)
		ContentPadding.PaddingBottom = UDim.new(0, 15)

		contentFrames[tabInfo.Name] = ContentFrame

		-- Simpan frame khusus untuk nanti
		if tabInfo.Name == "Ban List" then
			BanListFrame = ContentFrame
		elseif tabInfo.Name == "Players" then
			PlayersListFrame = ContentFrame
		elseif tabInfo.Name == "Logs" then
			LogsFrame = ContentFrame
		end
	end

	-- ============================================
	-- SETUP EVENT HANDLER UNTUK TAB
	-- ============================================
	
	local function onTabClick(tabName)
		-- Play sound
		local sound = Instance.new("Sound")
		sound.SoundId = SOUND_CLICK
		sound.Volume = 0.5
		sound.Parent = ScreenGui
		sound:Play()
		game:GetService("Debris"):AddItem(sound, 2)

		-- Hide all content
		for _, frame in pairs(contentFrames) do
			frame.Visible = false
		end

		-- Reset all tabs
		for name, tab in pairs(tabButtons) do
			if tab.Button then
				TweenService:Create(tab.Button, TweenInfo.new(0.2), {
					BackgroundColor3 = Color3.fromRGB(35, 35, 35),
					TextColor3 = Color3.fromRGB(200, 200, 200)
				}):Play()
				TweenService:Create(tab.Icon, TweenInfo.new(0.2), {
					ImageColor3 = Color3.fromRGB(200, 200, 200)
				}):Play()
				TweenService:Create(tab.Stroke, TweenInfo.new(0.2), {
					Color = Color3.fromRGB(60, 60, 60),
					Transparency = 0.5
				}):Play()
			end
		end

		-- Show selected content
		if contentFrames[tabName] then
			contentFrames[tabName].Visible = true
		end

		-- Highlight selected tab
		local tab = tabButtons[tabName]
		if tab and tab.Button then
			TweenService:Create(tab.Button, TweenInfo.new(0.2), {
				BackgroundColor3 = Color3.fromRGB(50, 80, 150),
				TextColor3 = Color3.fromRGB(255, 255, 255)
			}):Play()
			TweenService:Create(tab.Icon, TweenInfo.new(0.2), {
				ImageColor3 = Color3.fromRGB(255, 255, 255)
			}):Play()
			TweenService:Create(tab.Stroke, TweenInfo.new(0.2), {
				Color = Color3.fromRGB(100, 150, 255),
				Transparency = 0
			}):Play()
		end

		-- Load content for specific tabs
		if tabName == "Ban List" then
			RefreshBanList()
		elseif tabName == "Players" then
			RefreshPlayersList()
		elseif tabName == "Logs" then
			RefreshLogs()
		end
	end

	-- Connect event handlers to tabs
	for tabName, tabData in pairs(tabButtons) do
		if tabData.Button then
			tabData.Button.MouseButton1Click:Connect(function()
				onTabClick(tabName)
			end)
		end
	end

	-- Profile button functionality
	ProfileBtn.MouseButton1Click:Connect(function()
		ProfileFrame.Visible = not ProfileFrame.Visible
		local sound = Instance.new("Sound")
		sound.SoundId = SOUND_CLICK
		sound.Volume = 0.5
		sound.Parent = ScreenGui
		sound:Play()
		game:GetService("Debris"):AddItem(sound, 2)
	end)

	CloseProfileBtn.MouseButton1Click:Connect(function()
		ProfileFrame.Visible = false
	end)

	-- ============================================
	-- KONTEN DASHBOARD
	-- ============================================
	local dashboardContent = contentFrames.Dashboard

	-- Stats Cards
	local stats = {
		{title = "Total Players", value = #Players:GetPlayers(), color = Color3.fromRGB(50, 150, 255)},
		{title = "Detections", value = antiCheat.Statistics.TotalDetections, color = Color3.fromRGB(255, 100, 100)},
		{title = "Players Kicked", value = antiCheat.Statistics.PlayersKicked, color = Color3.fromRGB(255, 150, 50)},
		{title = "Players Banned", value = antiCheat.Statistics.PlayersBanned, color = Color3.fromRGB(200, 50, 50)}
	}

	for i, stat in ipairs(stats) do
		local StatCard = Instance.new("Frame")
		StatCard.Parent = dashboardContent
		StatCard.Size = UDim2.new(0.48, 0, 0, 80)
		StatCard.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
		StatCard.BackgroundTransparency = 0.3
		StatCard.BorderSizePixel = 0

		local StatCorner = Instance.new("UICorner")
		StatCorner.CornerRadius = UDim.new(0, 10)
		StatCorner.Parent = StatCard

		local StatStroke = Instance.new("UIStroke")
		StatStroke.Parent = StatCard
		StatStroke.Color = stat.color
		StatStroke.Thickness = 2

		local StatTitle = Instance.new("TextLabel")
		StatTitle.Parent = StatCard
		StatTitle.Position = UDim2.new(0, 15, 0, 15)
		StatTitle.Size = UDim2.new(1, -30, 0, 20)
		StatTitle.BackgroundTransparency = 1
		StatTitle.Font = Enum.Font.Gotham
		StatTitle.Text = stat.title
		StatTitle.TextColor3 = Color3.fromRGB(200, 200, 200)
		StatTitle.TextSize = 12
		StatTitle.TextXAlignment = Enum.TextXAlignment.Left

		local StatValue = Instance.new("TextLabel")
		StatValue.Parent = StatCard
		StatValue.Position = UDim2.new(0, 15, 0, 40)
		StatValue.Size = UDim2.new(1, -30, 0, 30)
		StatValue.BackgroundTransparency = 1
		StatValue.Font = Enum.Font.GothamBold
		StatValue.Text = tostring(stat.value)
		StatValue.TextColor3 = Color3.fromRGB(255, 255, 255)
		StatValue.TextSize = 24
		StatValue.TextXAlignment = Enum.TextXAlignment.Left
	end

	-- System Status
	local StatusFrame = Instance.new("Frame")
	StatusFrame.Parent = dashboardContent
	StatusFrame.Size = UDim2.new(1, 0, 0, 150)
	StatusFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	StatusFrame.BackgroundTransparency = 0.3
	StatusFrame.BorderSizePixel = 0

	local StatusCorner = Instance.new("UICorner")
	StatusCorner.CornerRadius = UDim.new(0, 10)
	StatusCorner.Parent = StatusFrame

	local StatusTitle = Instance.new("TextLabel")
	StatusTitle.Parent = StatusFrame
	StatusTitle.Position = UDim2.new(0, 15, 0, 15)
	StatusTitle.Size = UDim2.new(1, -30, 0, 25)
	StatusTitle.BackgroundTransparency = 1
	StatusTitle.Font = Enum.Font.GothamBold
	StatusTitle.Text = "System Status"
	StatusTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
	StatusTitle.TextSize = 16
	StatusTitle.TextXAlignment = Enum.TextXAlignment.Left

	local function CreateStatusItem(parent, yPos, text, status)
		local StatusItem = Instance.new("Frame")
		StatusItem.Parent = parent
		StatusItem.Position = UDim2.new(0, 15, 0, yPos)
		StatusItem.Size = UDim2.new(1, -30, 0, 25)
		StatusItem.BackgroundTransparency = 1

		local StatusText = Instance.new("TextLabel")
		StatusText.Parent = StatusItem
		StatusText.Position = UDim2.new(0, 0, 0, 0)
		StatusText.Size = UDim2.new(0.7, 0, 1, 0)
		StatusText.BackgroundTransparency = 1
		StatusText.Font = Enum.Font.Gotham
		StatusText.Text = text
		StatusText.TextColor3 = Color3.fromRGB(200, 200, 200)
		StatusText.TextSize = 13
		StatusText.TextXAlignment = Enum.TextXAlignment.Left

		local StatusIndicator = Instance.new("Frame")
		StatusIndicator.Parent = StatusItem
		StatusIndicator.AnchorPoint = Vector2.new(1, 0.5)
		StatusIndicator.Position = UDim2.new(1, 0, 0.5, 0)
		StatusIndicator.Size = UDim2.new(0, 10, 0, 10)
		StatusIndicator.BackgroundColor3 = status and Color3.fromRGB(50, 200, 50) or Color3.fromRGB(200, 50, 50)
		StatusIndicator.BorderSizePixel = 0

		local StatusIndicatorCorner = Instance.new("UICorner")
		StatusIndicatorCorner.CornerRadius = UDim.new(1, 0)
		StatusIndicatorCorner.Parent = StatusIndicator

		return StatusItem
	end

	local yPos = 50
	local statusItems = {
		{"Anti-Cheat Engine", true},
		{"License Verification", true},
		{"Player Monitoring", true},
		{"Ban System", true},
		{"Remote Protection", true}
	}

	for _, item in ipairs(statusItems) do
		CreateStatusItem(StatusFrame, yPos, item[1], item[2])
		yPos = yPos + 28
	end

	-- ============================================
	-- KONTEN ANTI-CHEAT (SETTINGS)
	-- ============================================
	local antiCheatContent = contentFrames["Anti-Cheat"]

	local function CreateToggle(parent, name, enabled, callback)
		local ToggleFrame = Instance.new("Frame")
		ToggleFrame.Parent = parent
		ToggleFrame.Size = UDim2.new(1, 0, 0, 50)
		ToggleFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
		ToggleFrame.BackgroundTransparency = 0.3
		ToggleFrame.BorderSizePixel = 0

		local ToggleCorner = Instance.new("UICorner")
		ToggleCorner.CornerRadius = UDim.new(0, 8)
		ToggleCorner.Parent = ToggleFrame

		local Label = Instance.new("TextLabel")
		Label.Parent = ToggleFrame
		Label.Position = UDim2.new(0, 15, 0, 0)
		Label.Size = UDim2.new(1, -70, 1, 0)
		Label.BackgroundTransparency = 1
		Label.Font = Enum.Font.GothamMedium
		Label.Text = name
		Label.TextColor3 = Color3.fromRGB(255, 255, 255)
		Label.TextSize = 14
		Label.TextXAlignment = Enum.TextXAlignment.Left

		local Toggle = Instance.new("TextButton")
		Toggle.Parent = ToggleFrame
		Toggle.AnchorPoint = Vector2.new(1, 0.5)
		Toggle.Position = UDim2.new(1, -15, 0.5, 0)
		Toggle.Size = UDim2.new(0, 50, 0, 28)
		Toggle.BackgroundColor3 = enabled and Color3.fromRGB(50, 150, 50) or Color3.fromRGB(150, 50, 50)
		Toggle.BorderSizePixel = 0
		Toggle.Text = ""
		Toggle.AutoButtonColor = false

		local ToggleButtonCorner = Instance.new("UICorner")
		ToggleButtonCorner.CornerRadius = UDim.new(1, 0)
		ToggleButtonCorner.Parent = Toggle

		local ToggleIndicator = Instance.new("Frame")
		ToggleIndicator.Parent = Toggle
		ToggleIndicator.AnchorPoint = Vector2.new(0, 0.5)
		ToggleIndicator.Position = enabled and UDim2.new(1, -24, 0.5, 0) or UDim2.new(0, 4, 0.5, 0)
		ToggleIndicator.Size = UDim2.new(0, 20, 0, 20)
		ToggleIndicator.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
		ToggleIndicator.BorderSizePixel = 0

		local IndicatorCorner = Instance.new("UICorner")
		IndicatorCorner.CornerRadius = UDim.new(1, 0)
		IndicatorCorner.Parent = ToggleIndicator

		local state = enabled

		Toggle.MouseButton1Click:Connect(function()
			state = not state

			-- Play sound
			local sound = Instance.new("Sound")
			sound.SoundId = SOUND_TOGGLE
			sound.Volume = 0.3
			sound.Parent = ScreenGui
			sound:Play()
			game:GetService("Debris"):AddItem(sound, 2)

			-- Animate
			TweenService:Create(Toggle, TweenInfo.new(0.2), {
				BackgroundColor3 = state and Color3.fromRGB(50, 150, 50) or Color3.fromRGB(150, 50, 50)
			}):Play()

			TweenService:Create(ToggleIndicator, TweenInfo.new(0.2, Enum.EasingStyle.Quad), {
				Position = state and UDim2.new(1, -24, 0.5, 0) or UDim2.new(0, 4, 0.5, 0)
			}):Play()

			callback(state)
		end)

		return ToggleFrame
	end

	-- Add toggles for each detection type
	CreateToggle(antiCheatContent, "Speed Detection", antiCheat.Settings.Speed, function(state)
		antiCheat.Settings.Speed = state
		print("[reiAnC] Speed Detection:", state)
	end)

	CreateToggle(antiCheatContent, "Fly Detection", antiCheat.Settings.Fly, function(state)
		antiCheat.Settings.Fly = state
		print("[reiAnC] Fly Detection:", state)
	end)

	CreateToggle(antiCheatContent, "Teleport Detection", antiCheat.Settings.Teleport, function(state)
		antiCheat.Settings.Teleport = state
		print("[reiAnC] Teleport Detection:", state)
	end)

	CreateToggle(antiCheatContent, "NoClip Detection", antiCheat.Settings.NoClip, function(state)
		antiCheat.Settings.NoClip = state
		print("[reiAnC] NoClip Detection:", state)
	end)

	CreateToggle(antiCheatContent, "Jump Detection", antiCheat.Settings.Jump, function(state)
		antiCheat.Settings.Jump = state
		print("[reiAnC] Jump Detection:", state)
	end)

	CreateToggle(antiCheatContent, "Infinite Jump Detection", antiCheat.Settings.InfiniteJump, function(state)
		antiCheat.Settings.InfiniteJump = state
		print("[reiAnC] Infinite Jump Detection:", state)
	end)

	CreateToggle(antiCheatContent, "God Mode Detection", antiCheat.Settings.GodMode, function(state)
		antiCheat.Settings.GodMode = state
		print("[reiAnC] God Mode Detection:", state)
	end)

	CreateToggle(antiCheatContent, "Remote Spy Detection", antiCheat.Settings.RemoteSpy, function(state)
		antiCheat.Settings.RemoteSpy = state
		print("[reiAnC] Remote Spy Detection:", state)
	end)

	CreateToggle(antiCheatContent, "Executor Detection", antiCheat.Settings.ExecutorDetection, function(state)
		antiCheat.Settings.ExecutorDetection = state
		print("[reiAnC] Executor Detection:", state)
	end)

	CreateToggle(antiCheatContent, "Anti-Exploit Protection", antiCheat.Settings.AntiExploit, function(state)
		antiCheat.Settings.AntiExploit = state
		print("[reiAnC] Anti-Exploit Protection:", state)
	end)

	-- Update canvas size
	task.wait()
	antiCheatContent.CanvasSize = UDim2.new(0, 0, 0, antiCheatContent.UIListLayout.AbsoluteContentSize.Y + 30)

	-- ============================================
	-- KONTEN BAN LIST
	-- ============================================
	local banListContent = contentFrames["Ban List"]

	-- Manual Ban Input
	local ManualBanFrame = Instance.new("Frame")
	ManualBanFrame.Parent = banListContent
	ManualBanFrame.Size = UDim2.new(1, 0, 0, 80)
	ManualBanFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
	ManualBanFrame.BackgroundTransparency = 0.3
	ManualBanFrame.BorderSizePixel = 0

	local ManualBanCorner = Instance.new("UICorner")
	ManualBanCorner.CornerRadius = UDim.new(0, 10)
	ManualBanCorner.Parent = ManualBanFrame

	local ManualTitle = Instance.new("TextLabel")
	ManualTitle.Parent = ManualBanFrame
	ManualTitle.Position = UDim2.new(0, 15, 0, 15)
	ManualTitle.Size = UDim2.new(1, -30, 0, 20)
	ManualTitle.BackgroundTransparency = 1
	ManualTitle.Font = Enum.Font.GothamBold
	ManualTitle.Text = "Manual Ban"
	ManualTitle.TextColor3 = Color3.fromRGB(255, 255, 255)
	ManualTitle.TextSize = 14
	ManualTitle.TextXAlignment = Enum.TextXAlignment.Left

	local BanInput = Instance.new("TextBox")
	BanInput.Parent = ManualBanFrame
	BanInput.Position = UDim2.new(0, 15, 0, 40)
	BanInput.Size = UDim2.new(0.7, -20, 0, 30)
	BanInput.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
	BanInput.BackgroundTransparency = 0.5
	BanInput.BorderSizePixel = 0
	BanInput.Font = Enum.Font.Gotham
	BanInput.PlaceholderText = "Enter User ID or Username"
	BanInput.Text = ""
	BanInput.TextColor3 = Color3.fromRGB(255, 255, 255)
	BanInput.TextSize = 13

	local BanInputCorner = Instance.new("UICorner")
	BanInputCorner.CornerRadius = UDim.new(0, 6)
	BanInputCorner.Parent = BanInput

	local ManualBanBtn = Instance.new("TextButton")
	ManualBanBtn.Parent = ManualBanFrame
	ManualBanBtn.Position = UDim2.new(0.72, 10, 0, 40)
	ManualBanBtn.Size = UDim2.new(0.28, -10, 0, 30)
	ManualBanBtn.BackgroundColor3 = Color3.fromRGB(200, 50, 50)
	ManualBanBtn.BorderSizePixel = 0
	ManualBanBtn.Font = Enum.Font.GothamBold
	ManualBanBtn.Text = "Ban"
	ManualBanBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
	ManualBanBtn.TextSize = 13

	local ManualBanCorner = Instance.new("UICorner")
	ManualBanCorner.CornerRadius = UDim.new(0, 6)
	ManualBanCorner.Parent = ManualBanBtn

	-- Manual ban functionality
	ManualBanBtn.MouseButton1Click:Connect(function()
		local input = BanInput.Text
		if input == "" then return end

		-- Check if input is numeric (User ID)
		local userId = tonumber(input)
		if userId then
			-- Check if player is online
			local targetPlayer = Players:GetPlayerByUserId(userId)
			if targetPlayer then
				antiCheat:BanPlayer(targetPlayer, "Manual ban by admin")
			else
				-- Add offline user to ban list
				table.insert(antiCheat.BannedUsers, {
					userId = userId,
					username = "Unknown (Offline)",
					time = os.time(),
					date = os.date("%Y-%m-%d %H:%M:%S"),
					reason = "Manual ban by admin",
					bannedBy = player.Name
				})
			end
		else
			-- Search for player by username
			for _, targetPlayer in ipairs(Players:GetPlayers()) do
				if targetPlayer.Name:lower():find(input:lower()) then
					antiCheat:BanPlayer(targetPlayer, "Manual ban by admin")
					break
				end
			end
		end

		BanInput.Text = ""
		task.wait(0.5)
		RefreshBanList()
	end)

	-- ============================================
	-- SET DEFAULT TAB TO DASHBOARD
	-- ============================================
	onTabClick("Dashboard")

	-- ============================================
	-- FOOTER
	-- ============================================
	local Footer = Instance.new("Frame")
	Footer.Name = "Footer"
	Footer.Parent = MainContainer
	Footer.Position = UDim2.new(0, 0, 1, -45)
	Footer.Size = UDim2.new(1, 0, 0, 45)
	Footer.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
	Footer.BackgroundTransparency = 0.2
	Footer.BorderSizePixel = 0

	local FooterCorner = Instance.new("UICorner")
	FooterCorner.CornerRadius = UDim.new(0, 12)
	FooterCorner.Parent = Footer

	local StatusText = Instance.new("TextLabel")
	StatusText.Parent = Footer
	StatusText.AnchorPoint = Vector2.new(0, 0.5)
	StatusText.Position = UDim2.new(0, 25, 0.5, 0)
	StatusText.Size = UDim2.new(0.5, -25, 0, 20)
	StatusText.BackgroundTransparency = 1
	StatusText.Font = Enum.Font.Gotham
	StatusText.Text = "ðŸŸ¢ System Operational"
	StatusText.TextColor3 = Color3.fromRGB(50, 200, 50)
	StatusText.TextSize = 12
	StatusText.TextXAlignment = Enum.TextXAlignment.Left

	local VersionText = Instance.new("TextLabel")
	VersionText.Parent = Footer
	VersionText.AnchorPoint = Vector2.new(1, 0.5)
	VersionText.Position = UDim2.new(1, -25, 0.5, 0)
	VersionText.Size = UDim2.new(0.5, -25, 0, 20)
	VersionText.BackgroundTransparency = 1
	VersionText.Font = Enum.Font.Gotham
	VersionText.Text = "v2.0.0 | reiAnC System"
	VersionText.TextColor3 = Color3.fromRGB(150, 150, 150)
	VersionText.TextSize = 12
	VersionText.TextXAlignment = Enum.TextXAlignment.Right

	-- ============================================
	-- MAKE DRAGGABLE
	-- ============================================
	local dragging, dragInput, dragStart, startPos

	local function update(input)
		local delta = input.Position - dragStart
		MainContainer.Position = UDim2.new(
			startPos.X.Scale,
			startPos.X.Offset + delta.X,
			startPos.Y.Scale,
			startPos.Y.Offset + delta.Y
		)
	end

	Header.InputBegan:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
			dragging = true
			dragStart = input.Position
			startPos = MainContainer.Position

			input.Changed:Connect(function()
				if input.UserInputState == Enum.UserInputState.End then
					dragging = false
				end
			end)
		end
	end)

	Header.InputChanged:Connect(function(input)
		if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
			dragInput = input
		end
	end)

	game:GetService("UserInputService").InputChanged:Connect(function(input)
		if input == dragInput and dragging then
			update(input)
		end
	end)

	-- ============================================
	-- AUTO-REFRESH PLAYERS LIST
	-- ============================================
	spawn(function()
		while true do
			task.wait(10)
			if PlayersListFrame and PlayersListFrame.Parent and PlayersListFrame.Parent.Visible then
				RefreshPlayersList()
			end
		end
	end)

	ScreenGui.Parent = playerGui

	-- Return GUI functions for external access
	return {
		RefreshPlayersList = RefreshPlayersList,
		RefreshBanList = RefreshBanList,
		RefreshLogs = RefreshLogs,
		ShowGUI = function()
			ScreenGui.Enabled = true
		end,
		HideGUI = function()
			ScreenGui.Enabled = false
		end,
		OpenTab = function(tabName)
			onTabClick(tabName)
		end
	}
end

-- ============================================
-- MAIN INITIALIZATION
-- ============================================
function SystemModule:Init(config, userData)
	print("[reiAnC] Initializing system modules...")

	-- Initialize Permission System
	local permissions = PermissionSystem.new(config)
	print("[reiAnC] âœ“ Permission system loaded")

	-- Initialize Anti-Cheat
	local antiCheat = AntiCheat.new(config, userData)
	print("[reiAnC] âœ“ Anti-cheat engine loaded")

	-- Player Events
	Players.PlayerAdded:Connect(function(player)
		-- Check if banned
		local isBanned, banData = antiCheat:IsPlayerBanned(player.UserId)
		if isBanned then
			player:Kick(string.format("[reiAnC] You are banned. Reason: %s | Date: %s", 
				banData.reason, banData.date))
			return
		end

		-- Initialize player data
		antiCheat:InitPlayer(player)

		-- Re-initialize when character spawns
		player.CharacterAdded:Connect(function()
			task.wait(1)
			antiCheat:InitPlayer(player)
		end)

		-- Show GUI to authorized users
		if player.UserId == game.CreatorId or permissions:CanAccess(player.UserId) then
			task.wait(2)
			CreateGUI(player, antiCheat, permissions, userData)
		end
	end)

	Players.PlayerRemoving:Connect(function(player)
		antiCheat:RemovePlayer(player)
	end)

	-- Start Anti-Cheat Monitoring
	antiCheat:StartMonitoring()
	print("[reiAnC] âœ“ Monitoring started")

	print("[reiAnC] âœ“ All systems operational")

	return {
		AntiCheat = antiCheat,
		Permissions = permissions,
		Statistics = antiCheat.Statistics,
		UserData = userData,
		Version = "2.0.0",
		
		-- Public API
		BanPlayer = function(self, targetPlayer, reason)
			return antiCheat:BanPlayer(targetPlayer, reason)
		end,
		
		UnbanPlayer = function(self, userId)
			return antiCheat:UnbanPlayer(userId)
		end,
		
		GetBanList = function(self)
			return antiCheat:GetBanList()
		end,
		
		IsPlayerBanned = function(self, userId)
			return antiCheat:IsPlayerBanned(userId)
		end,
		
		AddUserToRole = function(self, role, userId, username)
			return permissions:AddUser(role, userId, username)
		end,
		
		RemoveUserFromRole = function(self, role, userId)
			return permissions:RemoveUser(role, userId)
		end,
		
		GetUserRole = function(self, userId)
			return permissions:GetUserRole(userId)
		end
	}
end

return SystemModule
